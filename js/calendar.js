const events = [
    {
        "date": "2024/08/23",
        "start_time": "19:00",
        "end_time": "20:30",
        "content_codes": ["hasunosora"],
        "name": "みらくらぱーく！ラジオ公開録音 ～夏の大補習まつり～（スリーズブーケゲスト回）",
        "location_code": "hulic_hall_tokyo",
        "websites": [
            "https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=MPR"
        ]
    },
    {
        "date": "2024/08/24",
        "start_time": "14:00",
        "end_time": "15:30",
        "content_codes": ["hasunosora"],
        "name": "みらくらぱーく！ラジオ公開録音 ～夏の大補習まつり～（DOLLCHESTRAゲスト回）",
        "location_code": "hulic_hall_tokyo",
        "websites": [
            "https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=MPR"
        ]
    },
    {
        "date": "2024/08/24",
        "start_time": "17:30",
        "end_time": "19:00",
        "content_codes": ["hasunosora"],
        "name": "みらくらぱーく！ラジオ公開録音 ～夏の大補習まつり～（みらくらぱーく！回）",
        "location_code": "hulic_hall_tokyo",
        "websites": [
            "https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=MPR"
        ]
    },
    {
        "date": "2024/08/31",
        "start_time": "",
        "end_time": "",
        "content_codes": ["hasunosora"],
        "name": "Animelo Summer Live 2024 -Stargazer- DAY2",
        "location_code": "saitama_super_arena",
        "websites": [
            "https://anisama.tv/"
        ]
    },
    {
        "date": "2024/09/08",
        "start_time": "14:00",
        "end_time": "15:10",
        "content_codes": ["sasaki"],
        "name": "佐々木琴子のささいなこと 第1回ささいなイベント 第1部",
        "location_code": "congre_square_nihonbashi",
        "websites": [
            "https://www.joqr.co.jp/ag/article/131951/", "https://www.joqr.co.jp/ag/article/133240/", "https://bunkaagqr.zaiko.io/e/sskt"
        ]
    },
    {
        "date": "2024/09/08",
        "start_time": "14:30",
        "end_time": "16:00",
        "content_codes": ["kan"],
        "name": "菅叶和のカンがえるな、カンじろ！～Don't Think. Feel～ 志望遊戯～賭けるものは“笑”しかない!瞳の中に生涯最大の菅を見た!～ 昼の部",
        "location_code": "tokorozawa_sakura_town",
        "websites": [
            "https://nicochannel.jp/kan-kanna/articles/news/arXM7LzNN7eXeNXGKtu9Fv66", "https://nicochannel.jp/kan-kanna/articles/news/arUfTpz2h96nNzdLjk34iuSU", "https://nicochannel.jp/kan-kanna/articles/news/arj4HDAtBFW5Y5gs6kpbyVr3"
        ]
    },
    {
        "date": "2024/09/08",
        "start_time": "17:30",
        "end_time": "18:40",
        "content_codes": ["sasaki"],
        "name": "佐々木琴子のささいなこと 第1回ささいなイベント 第2部",
        "location_code": "congre_square_nihonbashi",
        "websites": [
            "https://www.joqr.co.jp/ag/article/131951/", "https://www.joqr.co.jp/ag/article/133240/", "https://bunkaagqr.zaiko.io/e/sskt"
        ]
    },
    {
        "date": "2024/09/08",
        "start_time": "18:00",
        "end_time": "19:30",
        "content_codes": ["kan"],
        "name": "菅叶和のカンがえるな、カンじろ！～Don't Think. Feel～ 志望遊戯～賭けるものは“笑”しかない!瞳の中に生涯最大の菅を見た!～ 昼の部",
        "location_code": "tokorozawa_sakura_town",
        "websites": [
            "https://nicochannel.jp/kan-kanna/articles/news/arXM7LzNN7eXeNXGKtu9Fv66", "https://nicochannel.jp/kan-kanna/articles/news/arUfTpz2h96nNzdLjk34iuSU", "https://nicochannel.jp/kan-kanna/articles/news/arj4HDAtBFW5Y5gs6kpbyVr3"
        ]
    },
    {
        "date": "2024/09/12",
        "start_time": "19:00",
        "end_time": "20:00",
        "content_codes": ["hasunosora"],
        "name": "103期Fes×ReC：LIVE ～first crossing～（12日19時回）",
        "location_code": "zepp_haneda",
        "websites": [
            "https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=FRL"
        ]
    },
    {
        "date": "2024/09/13",
        "start_time": "13:00",
        "end_time": "14:00",
        "content_codes": ["hasunosora"],
        "name": "103期Fes×ReC：LIVE ～first crossing～（13日13時回）",
        "location_code": "zepp_haneda",
        "websites": [
            "https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=FRL"
        ]
    },
    {
        "date": "2024/09/13",
        "start_time": "16:00",
        "end_time": "17:00",
        "content_codes": ["hasunosora"],
        "name": "103期Fes×ReC：LIVE ～first crossing～（13日16時回）",
        "location_code": "zepp_haneda",
        "websites": [
            "https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=FRL"
        ]
    },
    {
        "date": "2024/09/13",
        "start_time": "19:00",
        "end_time": "20:00",
        "content_codes": ["hasunosora"],
        "name": "103期Fes×ReC：LIVE ～first crossing～（13日19時回）",
        "location_code": "zepp_haneda",
        "websites": [
            "https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=FRL"
        ]
    },
    {
        "date": "2024/09/29",
        "start_time": "15:00",
        "end_time": "16:00",
        "content_codes": ["kan"],
        "name": "23歳もぶっと“バースデー”結那爆誕祭 1部",
        "location_code": "hulic_hall_tokyo",
        "websites": [
            "https://yuina-fanclub.jp/news/detail/aBoThSo7JKINpvpbQOA8",
            "https://x.com/yuina_STAFF/status/1829503919296516380"
        ]
    },
    {
        "date": "2024/10/20",
        "start_time": "13:00",
        "end_time": "15:00",
        "content_codes": ["hasunosora"],
        "name": "ツエーゲン金沢 沼津戦（蓮ノ空・サンシャイン！コラボ）",
        "location_code": "kanazawa_stadium",
        "websites": [
            "https://www.zweigen-kanazawa.jp/news/?id=16978"
        ]
    },
    {
        "date": "2024/10/31",
        "start_time": "20:00",
        "end_time": "21:00",
        "content_codes": ["hasunosora"],
        "name": "104期 2nd Term Fes×LIVE",
        "location_code": "various_theaters",
        "websites": [
            ""
        ]
    },
    {
        "date": "2024/11/16",
        "start_time": "15:30",
        "end_time": "17:00",
        "content_codes": ["hasunosora"],
        "name": "3rd Live Tour TRY TRI UNITY!!! with みらくらぱーく！＜昼公演＞",
        "location_code": "tachikawa_stage_garden",
        "websites": [
            "https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=TTUM"
        ]
    },
    {
        "date": "2024/11/16",
        "start_time": "19:00",
        "end_time": "20:30",
        "content_codes": ["hasunosora"],
        "name": "3rd Live Tour TRY TRI UNITY!!! with みらくらぱーく！＜夜公演＞",
        "location_code": "tachikawa_stage_garden",
        "websites": [
            "https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=TTUM"
        ]
    },
    {
        "date": "2024/11/23",
        "start_time": "12:00",
        "end_time": "13:00",
        "content_codes": ["tsukine"],
        "name": "月音こな2025カレンダー発売記念 特典お渡し会イベント 1部",
        "location_code": "tokyo_unknown",
        "websites": [
            "https://www.hmv.co.jp/news/article/240816160/"
        ]
    },
    {
        "date": "2024/11/23",
        "start_time": "14:30",
        "end_time": "15:30",
        "content_codes": ["tsukine"],
        "name": "月音こな2025カレンダー発売記念 特典お渡し会イベント 2部",
        "location_code": "tokyo_unknown",
        "websites": [
            "https://www.hmv.co.jp/news/article/240816160/"
        ]
    },
    {
        "date": "2024/11/24",
        "start_time": "15:30",
        "end_time": "17:00",
        "content_codes": ["hasunosora"],
        "name": "3rd Live Tour TRY TRI UNITY!!! with DOLLCHESTRA＜昼公演＞",
        "location_code": "orix_theater",
        "websites": [
            "https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=TTUD"
        ]
    },
    {
        "date": "2024/11/24",
        "start_time": "19:00",
        "end_time": "20:30",
        "content_codes": ["hasunosora"],
        "name": "3rd Live Tour TRY TRI UNITY!!! with DOLLCHESTRA＜夜公演＞",
        "location_code": "orix_theater",
        "websites": [
            "https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=TTUD"
        ]
    },
    {
        "date": "2024/11/30",
        "start_time": "",
        "end_time": "",
        "content_codes": ["kan"],
        "name": "菅叶和・梅澤めぐのカンバセーション・メロウ・グレイス! 番組イベント",
        "websites": [
            ""
        ]
    },
    {
        "date": "2024/12/01",
        "start_time": "15:30",
        "end_time": "17:00",
        "content_codes": ["hasunosora"],
        "name": "3rd Live Tour TRY TRI UNITY!!! with スリーズブーケ＜昼公演＞",
        "location_code": "nagoya_convention_center",
        "websites": [
            "https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=TTUC"
        ]
    },
    {
        "date": "2024/12/01",
        "start_time": "19:00",
        "end_time": "20:30",
        "content_codes": ["hasunosora"],
        "name": "3rd Live Tour TRY TRI UNITY!!! with スリーズブーケ＜夜公演＞",
        "location_code": "nagoya_convention_center",
        "websites": [
            "https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=TTUC"
        ]
    },
    {
        "date": "2024/12/21",
        "start_time": "",
        "end_time": "",
        "content_codes": ["hasunosora"],
        "name": "Live &Fan Meeting TRY TRY UNITY!!! DAY1",
        "location_code": "ryogoku_kokugikan",
        "websites": [
            "https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=TTY"
        ]
    },
    {
        "date": "2024/12/22",
        "start_time": "",
        "end_time": "",
        "content_codes": ["hasunosora"],
        "name": "Live &Fan Meeting TRY TRY UNITY!!! DAY2",
        "location_code": "ryogoku_kokugikan",
        "websites": [
            "https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=TTY"
        ]
    },
    {
        "date": "2025/01/10",
        "start_time": "17:00",
        "end_time": "20:00",
        "content_codes": ["hasunosora"],
        "name": "3rd Live Tour TRI TRI UNITY!!!",
        "location_code": "yokohama_arena",
        "websites": [
            "https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=TTU"
        ]
    },
    {
        "date": "2025/01/11",
        "start_time": "15:00",
        "end_time": "18:00",
        "content_codes": ["hasunosora"],
        "name": "3rd Live Tour TRI TRI UNITY!!!",
        "location_code": "yokohama_arena",
        "websites": [
            "https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=TTU"
        ]
    },
    {
        "date": "2025/01/31",
        "start_time": "20:00",
        "end_time": "",
        "content_codes": ["hasunosora"],
        "name": "104期 3rd Term Fes×LIVE",
        "location_code": "various_theaters",
        "websites": [
            ""
        ]
    },
    {
        "date": "2025/02/01",
        "start_time": "",
        "end_time": "",
        "content_codes": ["hasunosora"],
        "name": "LoveLive! Series Asia Tour 2024 ～みんなで叶える物語 ～ 横浜公演 DAY1",
        "location_code": "k_arena_yokohama",
        "websites": [
            "https://lovelive-anime.jp/special/live/live_detail.php?p=asiatour_2024"
        ]
    },
    {
        "date": "2025/02/02",
        "start_time": "",
        "end_time": "",
        "content_codes": ["hasunosora"],
        "name": "LoveLive! Series Asia Tour 2024 ～みんなで叶える物語 ～ 横浜公演 DAY2",
        "location_code": "k_arena_yokohama",
        "websites": [
            "https://lovelive-anime.jp/special/live/live_detail.php?p=asiatour_2024"
        ]
    }
];

const contents = {
    "hasunosora": {
        "name": "蓮ノ空",
        "color": "#fb8a9b",
        "websites": [
            "https://www.lovelive-anime.jp/hasunosora/",
            "https://x.com/hasunosora_SIC"
        ]
    },
    "sukumyu": {
        "name": "スクミュ",
        "color": "#c40035",
        "websites": [
            "https://www.lovelive-anime.jp/special/musical/top/",
            "https://x.com/sim_LoveLive"
        ]
    },
    "hanamiya": {
        "name": "花宮初奈",
        "color": "#68be8d",
        "websites": [
            "https://x.com/hanamiya_nina",
            "https://www.aoni.co.jp/search/hanamiya-niina.html"
        ]
    },
    "sasaki": {
        "name": "佐々木琴子",
        "color": "#c8504b",
        "websites": [
            "https://x.com/ssk_ktk828",
            "https://www.instagram.com/sasaki_kotoko828/",
            "https://www.youtube.com/@sasaki_kotoko",
            "https://stylecube.jp/talents/kotoko/index.html"
        ]
    },
    "tsukine": {
        "name": "月音こな",
        "color": "#b8b6b9",
        "websites": [
            "https://x.com/KonaTsukine",
            "https://www.tiktok.com/@tuknekona",
            "https://www.youtube.com/@tsukinekonaofficial/featured",
            "https://apollobay.jp/talent/%E6%9C%88%E9%9F%B3%E3%81%93%E3%81%AA/"
        ]
    },
    "nirei": {
        "name": "楡井希実",
        "color": "#ecb542",
        "websites": [
            "https://x.com/NozomiNirei",
            "https://holypeak.com/talent/voice-actor-women/%E6%A5%A1%E4%BA%95-%E5%B8%8C%E5%AE%9F/"
        ]
    },
    "nonaka": {
        "name": "野中ここな",
        "color": "#639ad1",
        "websites": [
            "https://x.com/cocona_nonaka",
            "https://www.amuse.co.jp/artist/A8878/index.html",
            "https://amuseplus.jp/mob/arti/artiShw.php?site=A&cd=A8878&_ga=2.94542364.1059034829.1725110488-316278567.1724853721"
        ]
    },
    "kan": {
        "name": "菅叶和",
        "color": "#e78cb7",
        "websites": [
            "https://x.com/kannkannna",
            "https://haikyo.co.jp/profile/profile.php?ActorID=13093"
        ]
    },
    "sakurai": {
        "name": "櫻井陽菜",
        "color": "#99d2d0",
        "websites": [
            "https://x.com/sakuraihi_na",
            "http://link-plan.net/talent_sakurai.html"
        ]
    },
    "hayama": {
        "name": "葉山風花",
        "color": "#f5d968",
        "websites": [
            "https://x.com/Hayama_Fuka",
            "https://holypeak.com/talent/voice-actor-women/%E8%91%89%E5%B1%B1-%E9%A2%A8%E8%8A%B1/"
        ]
    },
    "kurusu": {
        "name": "来栖りん",
        "color": "#a38be7",
        "websites": [
            "https://x.com/kurusurindesu",
            "https://www.instagram.com/ringring_rin/",
            "https://www.youtube.com/@kurusu_rin",
            "https://kurusurin.jp/",
            "https://kurusurin-fc.com/",
            "https://starrise.info/artists/kurusurin/",
        ]
    }
};

const locations = {
    "hulic_hall_tokyo": {
        "name": "ヒューリックホール東京",
        "prefecture": "東京都",
        "city": "千代田区",
        "nearest_station": "有楽町",
        "capacity": 944,
        "show_map": true,
        "websites": [
            "https://hulic-theater.com/"
        ]
    },
    "saitama_super_arena": {
        "name": "さいたまスーパーアリーナ",
        "prefecture": "埼玉県",
        "city": "さいたま市",
        "nearest_station": "さいたま新都心",
        "capacity": 37000,
        "show_map": true,
        "websites": [
            "https://www.saitama-arena.co.jp/arena/"
        ]
    },
    "tokorozawa_sakura_town": {
        "name": "ところざわサクラタウン(ジャパンパビリオンホールA シーティング)",
        "prefecture": "埼玉県",
        "city": "所沢市",
        "nearest_station": "東所沢",
        "capacity": 650,
        "show_map": true,
        "websites": [
            "https://tokorozawa-sakuratown.com/japanpavilion.html"
        ]
    },
    "congre_square_nihonbashi": {
        "name": "コングレスクエア日本橋(ホールA・B)",
        "prefecture": "東京都",
        "city": "中央区",
        "nearest_station": "日本橋",
        "capacity": 400,
        "show_map": true,
        "websites": [
            "https://congres-square.jp/nihonbashi/"
        ]
    },
    "zepp_haneda": {
        "name": "Zepp Haneda",
        "prefecture": "東京都",
        "city": "大田区",
        "nearest_station": "天空橋",
        "capacity": 2925,
        "show_map": true,
        "websites": [
            "https://www.zepp.co.jp/hall/haneda/"
        ]
    },
    "tachikawa_stage_garden": {
        "name": "立川ステージガーデン",
        "prefecture": "東京都",
        "city": "立川市",
        "nearest_station": "立川",
        "capacity": 2500,
        "show_map": true,
        "websites": [
            "https://www.t-sg.jp/"
        ]
    },
    "ryogoku_kokugikan": {
        "name": "両国国技館",
        "prefecture": "東京都",
        "city": "墨田区",
        "nearest_station": "両国",
        "capacity": 11098,
        "show_map": true,
        "websites": [
            "https://www.sumo.or.jp/Kokugikan/"
        ]
    },
    "seinenkan_hall": {
        "name": "日本青年館ホール",
        "prefecture": "東京都",
        "city": "渋谷区",
        "nearest_station": "外苑前",
        "capacity": 1249,
        "show_map": true,
        "websites": [
            ""
        ]
    },
    "yokohama_arena": {
        "name": "横浜アリーナ(メインアリーナ)",
        "prefecture": "神奈川県",
        "city": "横浜市",
        "nearest_station": "新横浜",
        "capacity": 17000,
        "show_map": true,
        "websites": [
            "https://www.yokohama-arena.co.jp/"
        ]
    },
    "k_arena_yokohama": {
        "name": "Kアリーナ横浜",
        "prefecture": "神奈川県",
        "city": "横浜市",
        "nearest_station": "新高島",
        "capacity": 20033,
        "show_map": true,
        "websites": [
            ""
        ]
    },
    "nagoya_convention_center": {
        "name": "名古屋国際会議場（センチュリーホール）",
        "prefecture": "愛知県",
        "city": "名古屋市",
        "nearest_station": "日比野",
        "capacity": 3000,
        "show_map": true,
        "websites": [
            "https://www.nagoya-congress-center.jp/"
        ]
    },
    "kanazawa_station_dome": {
        "name": "金沢駅もてなしドーム地下広場",
        "prefecture": "石川県",
        "city": "金沢市",
        "nearest_station": "金沢",
        "capacity": "",
        "show_map": true,
        "websites": [
            "https://www4.city.kanazawa.lg.jp/soshikikarasagasu/dorokanrika/gyomuannai/2/1/6818.html"
        ]
    },
    "ishikawa_prefecture_music_hall": {
        "name": "石川県立音楽堂",
        "prefecture": "石川県",
        "city": "金沢市",
        "nearest_station": "金沢",
        "capacity": 1560,
        "show_map": true,
        "websites": [
            "https://www.ongakudo.pref.ishikawa.jp/"
        ]
    },
    "kanazawa_stadium": {
        "name": "金沢ゴーゴーカレースタジアム",
        "prefecture": "石川県",
        "city": "金沢市",
        "nearest_station": "東金沢",
        "capacity": "10444",
        "show_map": true,
        "websites": [
            "https://www.kanazawa-stadium.jp/"
        ]
    },
    "shinkabukiza": {
        "name": "新歌舞伎座",
        "prefecture": "大阪府",
        "city": "大阪市",
        "nearest_station": "大阪上本町",
        "capacity": 1501,
        "show_map": true,
        "websites": [
            "https://www.shinkabukiza.co.jp/"
        ]
    },
    "orix_theater": {
        "name": "オリックス劇場",
        "prefecture": "大阪府",
        "city": "大阪市",
        "nearest_station": "四ツ橋",
        "capacity": 2400,
        "show_map": true,
        "websites": [
            "https://www.orixtheater.jp/"
        ]
    },
    "shanghai_national_exhibition_center": {
        "name": "国家会展中心（上海）虹馆EH (National Exhibition and Convention Center)",
        "prefecture": "中華人民共和国：上海市",
        "city": "",
        "nearest_station": "",
        "capacity": 8000,
        "show_map": true,
        "websites": [
            "https://www.neccsh.com/cecsh/exhibition/venue.jspx"
        ]
    },
    "tokyo_unknown": {
        "name": "東京都内某所",
        "prefecture": "東京都",
        "city": "",
        "nearest_station": "",
        "capacity": "",
        "show_map": false,
        "websites": [
            ""
        ]
    },
    "various_theaters": {
        "name": "全国の劇場",
        "prefecture": "",
        "city": "",
        "nearest_station": "",
        "capacity": "",
        "show_map": false,
        "websites": [
            ""
        ]
    },
};
const holidays = [
    {
        "date": "2024-01-01",
        "name": "元日"
    },
    {
        "date": "2024-02-11",
        "name": "建国記念の日"
    },
    {
        "date": "2024-04-29",
        "name": "昭和の日"
    },
    {
        "date": "2024-05-03",
        "name": "憲法記念日"
    },
    {
        "date": "2024-05-04",
        "name": "みどりの日"
    },
    {
        "date": "2024-05-05",
        "name": "こどもの日"
    },
    {
        "date": "2024-11-03",
        "name": "文化の日"
    },
    {
        "date": "2024-11-23",
        "name": "勤労感謝の日"
    }
];

const modal = document.getElementById("modal");
const modalBody = document.getElementById("modal-body");
const closeButton = document.querySelector(".close-button");
let currentMonth = new Date().getMonth();
let currentYear = new Date().getFullYear();

function closeModal() {
    modal.style.display = "none";
}

function openModal(content) {
    modalBody.innerHTML = content;
    modal.style.display = "block";
}

closeButton.addEventListener("click", closeModal);

window.addEventListener("click", (event) => {
    if (event.target == modal) {
        closeModal();
    }
});

function getMonthYearFromURL() {
    const params = new URLSearchParams(window.location.search);
    const month = params.get('month');
    const year = params.get('year');
    return { month: month ? parseInt(month) - 1 : new Date().getMonth(), year: year ? parseInt(year) : new Date().getFullYear() };
}

// カレンダーを作成する関数
function createCalendar(year, month) {
    const calendar = document.getElementById('calendar');
    const calendarYear = document.getElementById('calendar-year');
    const calendarMonth = document.getElementById('calendar-month');
    calendar.innerHTML = '';  // カレンダーをクリア

    const weekdays = ['日', '月', '火', '水', '木', '金', '土'];

    // 年と月を表示
    calendarYear.textContent = `${year}年`;
    calendarMonth.textContent = `${month + 1}月`;

    // 曜日の行を作成
    weekdays.forEach((day, index) => {
        const weekdayCell = document.createElement('div');
        weekdayCell.className = `calendar-weekday ${index === 6 ? 'saturday' : index === 0 ? 'sunday' : ''}`;
        weekdayCell.textContent = day;
        calendar.appendChild(weekdayCell);
    });

    const firstDay = new Date(year, month, 1);
    const lastDay = new Date(year, month + 1, 0);
    const numDays = lastDay.getDate();
    const startDay = firstDay.getDay();
    const today = new Date(); // 現在の日付を取得

    // 1日の位置までの空白セルを作成
    for (let i = 0; i < startDay; i++) {
        const emptyCell = document.createElement('div');
        emptyCell.className = 'calendar-day empty';
        calendar.appendChild(emptyCell);
    }

    // 各日のセルを作成
    for (let date = 1; date <= numDays; date++) {
        const dayCell = document.createElement('div');
        const dayDate = new Date(year, month, date);
        const dayOfWeek = dayDate.getDay();

        // 土曜日と日曜日に特定のクラスを追加
        if (dayOfWeek === 0) {
            dayCell.className = 'calendar-day sunday';
        } else if (dayOfWeek === 6) {
            dayCell.className = 'calendar-day saturday';
        } else {
            dayCell.className = 'calendar-day';
        }

        // 今日の日付の場合、.todayクラスを追加
        if (dayDate.toDateString() === today.toDateString()) {
            dayCell.classList.add('today');
        }

        dayCell.innerHTML = `<div class="date">${date}</div>`;

        // 祝日判定
        holidays.forEach(holiday => {
            const holidayDate = new Date(holiday.date);
            if (holidayDate.toDateString() === dayDate.toDateString()) {
                dayCell.classList.add('holiday');  // 祝日のスタイルを追加
                const holidayName = document.createElement('span');
                holidayName.className = 'holiday-name';
                holidayName.textContent = holiday.name;
                dayCell.querySelector('.date').appendChild(holidayName);  // 日付の横に祝日名を追加
            }
        });

        // イベント表示
        events.forEach(event => {
            if (new Date(event.date).toDateString() === dayDate.toDateString()) {
                const eventDiv = document.createElement('div');
                eventDiv.className = 'event';
                const contentCode = event.content_codes[0];
                const contentColor = contents[contentCode] ? contents[contentCode].color : '#cccccc';  // デフォルトカラー
                eventDiv.style.backgroundColor = contentColor;
                const locationPrefecture = locations[event.location_code]?.prefecture || '';
                const locationCity = locations[event.location_code]?.city || '';
                eventDiv.innerHTML = `
                    <span class="event-time">${event.start_time + " - " + event.end_time}</span>
                    <span class="event-title">${event.name.substring(0, 20) + "…"}</span>
                    <span class="event-location">${"＠" + locationPrefecture + locationCity}</span>
                `;
                eventDiv.onclick = () => {
                    const eventDetails = `
                        <h2> ${event.name}</h2>
                        <table class="modal-table">
                            <tr>
                                <td class="label">日付</td>
                                <td class="value">${event.date}</td>
                            </tr>
                            <tr>
                                <td class="label">開始時刻</td>
                                <td class="value">${event.start_time}</td>
                            </tr>
                            <tr>
                                <td class="label">終了時刻</td>
                                <td class="value">${event.end_time}</td>
                            </tr>
                            <tr>
                                <td class="label">ウェブサイト</td>
                                <td class="value">${event.websites.map(url => `<a href="${url}" target="_blank">${url}</a>`).join('<br>')}</td>
                            </tr>
                        </table>
                    `;
                    openModal(eventDetails);
                };
                dayCell.appendChild(eventDiv);
            }
        });

        calendar.appendChild(dayCell);
    }
}

document.getElementById('prev-month').addEventListener('click', () => {
    if (currentMonth === 0) {
        currentMonth = 11;
        currentYear--;
    } else {
        currentMonth--;
    }
    updateCalendar();
});

document.getElementById('next-month').addEventListener('click', () => {
    if (currentMonth === 11) {
        currentMonth = 0;
        currentYear++;
    } else {
        currentMonth++;
    }
    updateCalendar();
});

function updateCalendar() {
    createCalendar(currentYear, currentMonth);
    window.history.pushState({}, '', `?month=${currentMonth + 1}&year=${currentYear}`);
}

const { month, year } = getMonthYearFromURL();
currentMonth = month;
currentYear = year;
createCalendar(currentYear, currentMonth);